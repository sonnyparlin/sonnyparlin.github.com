---
layout: single
title: Fix for No Sound in Headphones on Fedora 32/33
date: '2020-10-24T00:27:00.009-04:00'
author: Sonny Parlin
categories:
  - Blog
tags:
- headphones not working
- systemd
- fedora
- linux
- bash
- no sound
modified_time: '2020-10-25T00:44:25.890-04:00'
blogger_id: tag:blogger.com,1999:blog-274791723093518550.post-634707510706044153
blogger_orig_url: https://www.sparl.in/2020/10/if-anyone-else-has-samsung-galaxy-book.html
---

<p>Okay if anyone else has a Samsung Galaxy Book Flex ‚ç∫ running Fedora 32/33 and runs into the issue of getting no sound in your headphones, I have a solution/workaround that is satisfying enough for me. First let's get the headphones working on boot.</p> <p>Create a service like so:</p> <pre><code class='bash'>    [root@localhost ~]# cat /usr/lib/systemd/system/headphones.service<br />    [Unit]<br />    Description=Start headphones<br />    After=multi-user.target<br /><br />    [Service]<br />    Type=oneshot<br />    ExecStart=/usr/local/bin/headphones<br /><br />    [Install]<br />    WantedBy=basic.target<br /></code></pre> <p>As you can see it makes a call to /usr/local/bin/headphones, this file looks like so:</p><pre><code class='bash'>    [root@localhost ~]# cat /usr/local/bin/headphones<br />    #!/usr/bin/bash<br />    /usr/bin/hda-verb /dev/snd/hwC0D0 0x1a SET_PIN_WIDGET_CONTROL 0x5<br /></code></pre><p>Make sure to make the file executable: chmod +x /usr/local/bin/headphones</p> <p>We still need to install acpid:</p> <p>`sudo dnf install acpid`</p> <p>Now create the corresponding scripts to detect when headphones have been plugged/unplugged:</p><pre><code class='bash'>    [sonnyparlin@localhost ~]$ cat /etc/acpi/events/headphone_jack<br />    event=jack/headphone.*<br />    action=/etc/acpi/actions/headphone.sh<br /></code></pre><p>The action points to /etc/acpi/actions/headphone.sh, which looks like so:</p><pre><code class='bash'>    [sonnyparlin@localhost ~]$ cat /etc/acpi/actions/headphone.sh<br />    #!/bin/bash<br />    /usr/local/bin/headphones<br /></code></pre><p>Don't forget to make it executable chmod +x /etc/acpi/actions/headphone.sh</p> <p>Now let's make sure it works after suspend:</p><pre><code class='bash'>    [sonnyparlin@localhost ~]$ cat /usr/lib/systemd/system-sleep/headphones.sh<br />    #!/bin/sh<br /><br />    if [ "${1}" == "post" ]; then<br />      # Do the thing you want after suspend here, e.g.:<br />      hda-verb /dev/snd/hwC0D0 0x1a SET_PIN_WIDGET_CONTROL 0x5<br />    fi<br /></code></pre><p>I'm pretty sure that's it, it took me 3 days to come up with all this and browsing various forums and solutions. The only thing I've noticed is that if the headphones are plugged in when you boot up, you may have to log in as root and manually type:</p> <pre><code class='bash'>    /usr/local/bin/headphones<br /></code></pre> <p>And that will solve the problem. If you boot up without headphones, turn on some music then plug your headphones in, it should switch over and give you sound. I hope this helps someone.</p>
